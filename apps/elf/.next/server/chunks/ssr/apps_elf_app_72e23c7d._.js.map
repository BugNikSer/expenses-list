{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/nick/projects/expenses-list/apps/elf/app/components/Select/Option.tsx"],"sourcesContent":["import { useMemo } from \"react\";\nimport { ListItemText, MenuItem } from \"@mui/material\";\nimport type { Value } from \"./types\";\n\nfunction SelectOption ({\n    option,\n    value,\n    onClick,\n}: {\n    option: any;\n    value: Value;\n    onClick: (id: string | number) => void;\n}) {\n    const id = useMemo(() => option.id, [option]);\n\n    const isSelected = useMemo(() => {\n        if (Array.isArray(value)) {\n            return (value as any[]).includes(id);\n        }\n        return value === id;\n    }, [value, option]);\n\n    return (\n        <MenuItem onClick={() => onClick(id)} selected={isSelected}>\n            <ListItemText>{option.label}</ListItemText>\n        </MenuItem>\n    )\n};\n\nexport default SelectOption;\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAAA;;;;AAGA,SAAS,aAAc,EACnB,MAAM,EACN,KAAK,EACL,OAAO,EAKV;IACG,MAAM,KAAK,IAAA,+UAAO,EAAC,IAAM,OAAO,EAAE,EAAE;QAAC;KAAO;IAE5C,MAAM,aAAa,IAAA,+UAAO,EAAC;QACvB,IAAI,MAAM,OAAO,CAAC,QAAQ;YACtB,OAAO,AAAC,MAAgB,QAAQ,CAAC;QACrC;QACA,OAAO,UAAU;IACrB,GAAG;QAAC;QAAO;KAAO;IAElB,qBACI,6WAAC,oaAAQ;QAAC,SAAS,IAAM,QAAQ;QAAK,UAAU;kBAC5C,cAAA,6WAAC,obAAY;sBAAE,OAAO,KAAK;;;;;;;;;;;AAGvC;uCAEe","debugId":null}},
    {"offset": {"line": 49, "column": 0}, "map": {"version":3,"sources":["file:///home/nick/projects/expenses-list/apps/elf/app/components/Select/Item.tsx"],"sourcesContent":["'use-client';\n\nimport { useEffect } from \"react\";\nimport { Chip } from '@mui/material';\nimport { useIntersectionObserver } from 'usehooks-ts';\n\nfunction Item({\n    label,\n    id,\n    onDelete,\n    handleIntersect,\n}: {\n    label: any;\n    id: any;\n    onDelete: (id: any) => void;\n    handleIntersect: (options: { id: any, isIntersecting: boolean }) => void\n}) {\n    const { isIntersecting, ref } = useIntersectionObserver({ threshold: 1 });\n    useEffect(() => handleIntersect({ isIntersecting, id }), [isIntersecting, id])\n\n    return (\n        <Chip\n            ref={ref}\n            label={label}\n            onClick={(e) => e.stopPropagation()}\n            onDelete={() => onDelete(id)}\n            sx={{\n                visibility: isIntersecting ? \"visible\" : \"hidden\",\n            }}\n        />\n    )\n};\n\nexport default Item;\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMA,SAAS,KAAK,EACV,KAAK,EACL,EAAE,EACF,QAAQ,EACR,eAAe,EAMlB;IACG,MAAM,EAAE,cAAc,EAAE,GAAG,EAAE,GAAG,IAAA,2PAAuB,EAAC;QAAE,WAAW;IAAE;IACvE,IAAA,iVAAS,EAAC,IAAM,gBAAgB;YAAE;YAAgB;QAAG,IAAI;QAAC;QAAgB;KAAG;IAE7E,qBACI,6WAAC,oZAAI;QACD,KAAK;QACL,OAAO;QACP,SAAS,CAAC,IAAM,EAAE,eAAe;QACjC,UAAU,IAAM,SAAS;QACzB,IAAI;YACA,YAAY,iBAAiB,YAAY;QAC7C;;;;;;AAGZ;uCAEe","debugId":null}},
    {"offset": {"line": 92, "column": 0}, "map": {"version":3,"sources":["file:///home/nick/projects/expenses-list/apps/elf/app/components/Select/Select.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useRef, useMemo, useEffect } from 'react';\nimport { Button, Popper, Backdrop, MenuList, Stack, Chip, IconButton, Input } from \"@mui/material\"\nimport { CloseRounded, SearchRounded } from '@mui/icons-material';\n\nimport type { Value } from \"./types\";\nimport Option from \"./Option\";\nimport Item from \"./Item\";\n\nfunction Select({\n    options,\n    filterable,\n    multiple,\n    clearable,\n    value,\n    onChange,\n    placeholder = \"Выберите значение\"\n}: {\n    options: any[];\n    filterable?: boolean;\n    multiple?: boolean;\n    clearable?: boolean;\n    value: Value;\n    onChange: (value: Value) => void;\n    placeholder?: string;\n}) {\n    const buttonRef = useRef<HTMLButtonElement | null>(null);\n    const [isOpen, setIsOpen] = useState(false);\n    const [filterValue, setFilterValue] = useState(\"\");\n    const [hiddenItems, setHiddenItems] = useState<any[]>([]);\n\n    const handleOptionCLick = (id: string | number) => {\n        if (multiple) {\n            if (!value || !Array.isArray(value)) {\n                onChange([id] as Value);\n            } else {\n                const optionValueIndex = (value as any[]).indexOf(id);\n                if (optionValueIndex === -1) {\n                    onChange([...(value as any[]), id]);\n                } else {\n                    onChange((value as any[]).toSpliced(optionValueIndex, 1));\n                }\n            }\n        } else {\n            onChange(id);\n            setIsOpen(false);\n        }\n    };\n\n    const handleChipDelete = (id: any) => {\n        if (multiple) {\n            if (!Array.isArray(value) || value.length === 1) onChange(null);\n\n            const optionValueIndex = (value as any[]).indexOf(id);\n            if (optionValueIndex !== -1) {\n                onChange((value as any[]).toSpliced(optionValueIndex, 1));\n            }\n        } else {\n            onChange(null);\n        }\n    };\n\n    const handleChipIntersect = ({ id, isIntersecting }: { id: any, isIntersecting: boolean }) => {\n        if (isIntersecting) {\n            const index = hiddenItems.indexOf(id);\n            setHiddenItems(hiddenItems.toSpliced(index, 1));\n        } else setHiddenItems([...hiddenItems, id]);\n    };\n\n    useEffect(() => {\n        if (!isOpen) setFilterValue(\"\");\n    }, [isOpen])\n\n    const content = useMemo(() => {\n        if (Array.isArray(value)) {\n            if (value.length) return (\n                <Stack\n                    direction=\"row\"\n                    gap=\"4px\"\n                    sx={{\n                        width: \"100%\",\n                        overflow: \"hidden\",\n                    }}\n                >\n                    {value.map((valueItem) => {\n                        const option = options.find(({ id }) => id === valueItem)\n                        return (\n                            <Item\n                                key={option.id}\n                                id={option.id}\n                                label={option.label}\n                                onDelete={handleChipDelete}\n                                handleIntersect={handleChipIntersect}\n                            />\n                        )\n                    })}\n                </Stack>\n            )\n            return placeholder;\n        }\n\n        if (value === null || value === \"\") return placeholder;\n        const option = options.find(({ id }) => id === value);\n        return <Chip label={option.label} />\n    }, [value]);\n\n    const filteredOptions = useMemo(() => {\n        const filterRegExp = new RegExp(filterValue.toLowerCase())\n        return options.filter(({ label }) => filterRegExp.test(label.toLowerCase()));\n    }, [options, filterValue]);\n\n    return (\n        <>\n            <Button\n                ref={buttonRef}\n                variant='outlined'\n                onClick={() => setIsOpen(true)}\n                endIcon={(\n                    <>\n                        {hiddenItems.length ? (\n                            <Chip\n                                onClick={(e) => e.stopPropagation()}\n                                label={`+${hiddenItems.length}`}\n                            />\n                        ) : (<></>)}\n                        {clearable && (\n                            <IconButton\n                                size='small'\n                                onClick={(e) => {\n                                    e.stopPropagation();\n                                    onChange(null);\n                                }}\n                            >\n                                <CloseRounded />\n                            </IconButton>\n                        )}\n                    </>\n                )}\n                sx={{\n                    width: \"300px\"\n                }}\n            >\n                {content}\n            </Button>\n            <Backdrop\n                open={isOpen}\n                onClick={() => setIsOpen(false)}\n                sx={(theme) => ({\n                    zIndex: theme.zIndex.drawer + 1,\n                    backgroundColor: \"transparent\",\n                })}\n            >\n                <Popper\n                    anchorEl={buttonRef?.current}\n                    open={isOpen}\n                    placement='bottom-start'\n                    sx={(theme) => ({\n                        boxShadow: `0 0 8px 4px rgba(0, 0, 0, 0.3)`,\n                        zIndex: theme.zIndex.drawer + 2,\n                        width: \"300px\"\n                    })}\n                    onClick={e => e.stopPropagation()}\n                >\n                    {filterable && (\n                        <Input\n                            value={filterValue}\n                            onChange={e => setFilterValue(e.target.value)}\n                            sx={{ width: '100%' }}\n                            startAdornment={<SearchRounded />}\n                        />\n                    )}\n                    <MenuList sx={{ padding: 0 }}>\n                        {filteredOptions.map(option => (\n                            <Option\n                                key={option.id}\n                                option={option}\n                                onClick={handleOptionCLick}\n                                value={value}\n                            />\n                        ))}\n                    </MenuList>\n                </Popper>\n            </Backdrop>\n        </>\n    )\n};\n\nexport default Select;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 332, "column": 0}, "map": {"version":3,"sources":["file:///home/nick/projects/expenses-list/apps/elf/app/components/Select/index.ts"],"sourcesContent":["export { default as Select } from \"./Select\";"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 348, "column": 0}, "map": {"version":3,"sources":["file:///home/nick/projects/expenses-list/apps/elf/app/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from 'react';\nimport { Select } from './components/Select';\nimport { Box } from '@mui/material';\n\nexport default function Home() {\n    const [value, setValue] = useState<number | null>(null);\n\n    return (\n    <Box>\n        <Select\n            value={value}\n            options={[\n                { id: 1, label: \"One\" },\n                { id: 2, label: \"Two\" },\n                { id: 3, label: \"Three\" },\n                { id: 4, label: \"Four\" },\n                { id: 5, label: \"Five\" },\n            ]}\n            onChange={v => {\n                setValue(v as number);\n            }}\n            multiple\n            clearable\n            filterable\n        />\n    </Box>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AACA;AAJA;;;;;AAMe,SAAS;IACpB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,gVAAQ,EAAgB;IAElD,qBACA,6WAAC,gZAAG;kBACA,cAAA,6WAAC,oMAAM;YACH,OAAO;YACP,SAAS;gBACL;oBAAE,IAAI;oBAAG,OAAO;gBAAM;gBACtB;oBAAE,IAAI;oBAAG,OAAO;gBAAM;gBACtB;oBAAE,IAAI;oBAAG,OAAO;gBAAQ;gBACxB;oBAAE,IAAI;oBAAG,OAAO;gBAAO;gBACvB;oBAAE,IAAI;oBAAG,OAAO;gBAAO;aAC1B;YACD,UAAU,CAAA;gBACN,SAAS;YACb;YACA,QAAQ;YACR,SAAS;YACT,UAAU;;;;;;;;;;;AAItB","debugId":null}}]
}